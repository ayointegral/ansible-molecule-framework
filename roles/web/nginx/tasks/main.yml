---
# Main tasks for nginx role

- name: Include installation tasks
  ansible.builtin.include_tasks: install.yml
  tags:
    - nginx
    - nginx-install

- name: Include configuration tasks
  ansible.builtin.include_tasks: configure.yml
  tags:
    - nginx
    - nginx-configure

- name: Include SSL tasks
  ansible.builtin.include_tasks: ssl.yml
  when: nginx_ssl_enabled
  tags:
    - nginx
    - nginx-ssl

- name: Ensure nginx service is in desired state
  ansible.builtin.service:
    name: "{{ nginx_service_name }}"
    state: "{{ nginx_service_state }}"
    enabled: "{{ nginx_service_enabled }}"
  tags:
    - nginx
    - nginx-service
