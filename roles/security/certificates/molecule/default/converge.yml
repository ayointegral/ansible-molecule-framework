---
- name: Converge
  hosts: all
  become: true
  vars:
    certificates_self_signed: true
    certificates_common_name: "test.example.com"
    certificates_validity_days: 30
  pre_tasks:
    - name: Install cryptography dependencies
      ansible.builtin.apt:
        name:
          - python3-cryptography
        state: present
        update_cache: true
      when: ansible_os_family == 'Debian'
  roles:
    - role: "{{ lookup('env', 'MOLECULE_PROJECT_DIRECTORY') }}"
